(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdffb34a"],{3908:function(e,t,a){"use strict";t["a"]={data:function(){return{news:{},markets:[{}],imageUpload:"",imagePreview:"",errors:{},tags:[]}},methods:{getFormData:function(){var e=new FormData;return dd(this.tags,this.tags.reduce(function(e,t){return e+";"+t})),e.append("tags",this.tags.reduce(function(e,t){return e+";"+t})),e.append("title",this.news.title),e.append("resume",this.news.resume),e.append("text",this.news.text),this.imageUpload&&e.append("image",this.imageUpload),e},fileChange:function(e){this.errors.image="";var t=e.target.files||e.dataTranfer.files;if(t.length){var a=t[0];a.size>this.constants.DEFAULT_IMAGE_UPLOAD_SIZE?(this.errors.image="o tamanho da imagem excedeu o tamanho máximo",this.$refs.image.value=""):this.imageUpload=a}else this.$snotify.error("Não há arquivos selecionados","Erros!")}}}},b13d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("element-wrapper",[a("h6",{staticClass:"element-header"},[e._v("\n        Nova notícia\n    ")]),a("element-box",[a("form-component")],1)],1)},r=[],n=(a("cadf"),a("551c"),a("097d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"row"},[a("form-group",{attrs:{label:"Título",validate:e.vee,name:"title"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.news.title,expression:"news.title"},{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],staticClass:"form-control",attrs:{name:"title"},domProps:{value:e.news.title},on:{input:function(t){t.target.composing||e.$set(e.news,"title",t.target.value)}}})]),a("form-group",{attrs:{label:"Resumo",name:"description",validate:e.vee}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.news.resume,expression:"news.resume"},{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],staticClass:"form-control",attrs:{name:"description"},domProps:{value:e.news.resume},on:{input:function(t){t.target.composing||e.$set(e.news,"resume",t.target.value)}}})]),a("form-group",{attrs:{label:"Conteúdo",name:"text",validate:e.vee}},[a("wysiwyg",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{refs:"text",name:"text"},model:{value:e.news.text,callback:function(t){e.$set(e.news,"text",t)},expression:"news.text"}})],1),a("form-group",{attrs:{label:"Tags",col:"col-md-6",validate:e.vee,name:"tags"}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:e.tags,name:"tags",multiple:"",taggable:!0,"tag-placeholder":"Add this as new tag",placeholder:"Adcione tags para sua notícia",label:"name","track-by":"value"},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}}),e._l(e.errors.tags,function(t){return e.errors?a("span",{staticClass:"text-danger"},[a("small",[e._v(e._s(t))])]):e._e()})],2),a("form-group",{attrs:{label:"Imagem",name:"cover",validate:e.vee}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"cover",staticClass:"form-control",attrs:{type:"file",name:"cover"},on:{change:e.fileChange}}),e._l(e.errors.cover,function(t){return e.errors?a("span",{staticClass:"text-danger"},[a("small",[e._v(e._s(t))])]):e._e()})],2),e._m(0)],1)])])}),i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"}},[e._v("Enviar")])])}],o=a("eebb"),l=a("3908"),m={mixins:[o["a"],l["a"]],methods:{createNews:function(){var e=this;this.preload(!0);var t=this.getFormData();this.$store.dispatch("createNews",t).then(function(t){e.$router.push({name:"admin.news.index"}),e.$snotify.success(e.constants.messages.CREATE_SUCCESS_MESSAGE,e.constants.messages.SUCCESS_MESSAGE)}).catch(function(t){e.handleErrors(t)}).finally(function(){e.preload(!1)})},submit:function(){var e=this;this.$validator.validate().then(function(t){t?e.createNews():e.$snotify.warning(e.constants.messages.FORM_VALIDATE_MESSAGE)})},resetForm:function(){return{title:"",resume:"",text:"",cover:""}}},created:function(){this.news=this.resetForm()}},u=m,c=a("2877"),d=Object(c["a"])(u,n,i,!1,null,null,null);d.options.__file="Form.vue";var v=d.exports,p={components:{FormComponent:v}},f=p,g=Object(c["a"])(f,s,r,!1,null,null,null);g.options.__file="Create.vue";t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-cdffb34a.8b67e2f1.js.map